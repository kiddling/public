{"version":3,"file":"Collapsible.mjs","sources":["../../../../../admin/src/components/AIChat/components/Collapsible.tsx"],"sourcesContent":["import { useState, createContext, useContext, useRef, useLayoutEffect } from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport { styled } from 'styled-components';\n\ninterface CollapsibleContextValue {\n  open: boolean;\n  toggle: () => void;\n}\n\nconst CollapsibleContext = createContext<CollapsibleContextValue | undefined>(undefined);\n\nexport const useCollapsible = () => {\n  const context = useContext(CollapsibleContext);\n  if (!context) {\n    throw new Error('Collapsible components must be wrapped in <Collapsible />');\n  }\n  return context;\n};\n\nconst AnimatedContent = styled(Box)`\n  overflow: hidden;\n  transition: height ${({ theme }) => theme.motion.timings['200']}\n    ${({ theme }) => theme.motion.easings.easeOutQuad};\n`;\n\nexport const Collapsible = ({\n  children,\n  defaultOpen = false,\n}: {\n  children: React.ReactNode;\n  defaultOpen?: boolean;\n}) => {\n  const [open, setOpen] = useState(defaultOpen);\n  return (\n    <CollapsibleContext.Provider value={{ open, toggle: () => setOpen((prev) => !prev) }}>\n      {children}\n    </CollapsibleContext.Provider>\n  );\n};\n\nexport const CollapsibleTrigger = ({\n  children,\n}: {\n  children: React.ReactNode | ((props: { open: boolean }) => React.ReactNode);\n}) => {\n  const { toggle, open } = useCollapsible();\n  return (\n    <Box onClick={toggle} style={{ cursor: 'pointer' }}>\n      {typeof children === 'function' ? children({ open }) : children}\n    </Box>\n  );\n};\n\nexport const CollapsibleContent = ({ children }: { children: React.ReactNode }) => {\n  const { open } = useCollapsible();\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [height, setHeight] = useState<number>(0);\n\n  useLayoutEffect(() => {\n    if (contentRef.current) {\n      const contentHeight = contentRef.current.scrollHeight;\n      setHeight(contentHeight);\n    }\n  }, [children]);\n\n  return (\n    <AnimatedContent\n      ref={contentRef}\n      role=\"region\"\n      aria-hidden={!open}\n      style={{\n        height: open ? `${height}px` : 0,\n        visibility: height === 0 ? 'hidden' : 'visible',\n      }}\n    >\n      {children}\n    </AnimatedContent>\n  );\n};\n"],"names":["CollapsibleContext","createContext","undefined","useCollapsible","context","useContext","Error","AnimatedContent","styled","Box","theme","motion","timings","easings","easeOutQuad","Collapsible","children","defaultOpen","open","setOpen","useState","_jsx","Provider","value","toggle","prev","CollapsibleTrigger","onClick","style","cursor","CollapsibleContent","contentRef","useRef","height","setHeight","useLayoutEffect","current","contentHeight","scrollHeight","ref","role","aria-hidden","visibility"],"mappings":";;;;;AAUA,MAAMA,mCAAqBC,aAAmDC,CAAAA,SAAAA,CAAAA;MAEjEC,cAAiB,GAAA,IAAA;AAC5B,IAAA,MAAMC,UAAUC,UAAWL,CAAAA,kBAAAA,CAAAA;AAC3B,IAAA,IAAI,CAACI,OAAS,EAAA;AACZ,QAAA,MAAM,IAAIE,KAAM,CAAA,2DAAA,CAAA;AAClB;IACA,OAAOF,OAAAA;AACT;AAEA,MAAMG,eAAAA,GAAkBC,MAAOC,CAAAA,GAAAA,CAAI;;qBAEd,EAAE,CAAC,EAAEC,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAACC,OAAO,CAAC,KAAA,CAAM;IAC7D,EAAE,CAAC,EAAEF,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAACE,OAAO,CAACC,WAAW,CAAC;AACtD,CAAC;AAEM,MAAMC,cAAc,CAAC,EAC1BC,QAAQ,EACRC,WAAAA,GAAc,KAAK,EAIpB,GAAA;AACC,IAAA,MAAM,CAACC,IAAAA,EAAMC,OAAQ,CAAA,GAAGC,QAASH,CAAAA,WAAAA,CAAAA;IACjC,qBACEI,GAAA,CAACrB,mBAAmBsB,QAAQ,EAAA;QAACC,KAAO,EAAA;AAAEL,YAAAA,IAAAA;AAAMM,YAAAA,MAAAA,EAAQ,IAAML,OAAAA,CAAQ,CAACM,IAAAA,GAAS,CAACA,IAAAA;AAAM,SAAA;AAChFT,QAAAA,QAAAA,EAAAA;;AAGP;AAEaU,MAAAA,kBAAAA,GAAqB,CAAC,EACjCV,QAAQ,EAGT,GAAA;AACC,IAAA,MAAM,EAAEQ,MAAM,EAAEN,IAAI,EAAE,GAAGf,cAAAA,EAAAA;AACzB,IAAA,qBACEkB,GAACZ,CAAAA,GAAAA,EAAAA;QAAIkB,OAASH,EAAAA,MAAAA;QAAQI,KAAO,EAAA;YAAEC,MAAQ,EAAA;AAAU,SAAA;kBAC9C,OAAOb,QAAAA,KAAa,aAAaA,QAAS,CAAA;AAAEE,YAAAA;SAAUF,CAAAA,GAAAA;;AAG7D;AAEac,MAAAA,kBAAAA,GAAqB,CAAC,EAAEd,QAAQ,EAAiC,GAAA;IAC5E,MAAM,EAAEE,IAAI,EAAE,GAAGf,cAAAA,EAAAA;AACjB,IAAA,MAAM4B,aAAaC,MAAuB,CAAA,IAAA,CAAA;AAC1C,IAAA,MAAM,CAACC,MAAAA,EAAQC,SAAU,CAAA,GAAGd,QAAiB,CAAA,CAAA,CAAA;IAE7Ce,eAAgB,CAAA,IAAA;QACd,IAAIJ,UAAAA,CAAWK,OAAO,EAAE;AACtB,YAAA,MAAMC,aAAgBN,GAAAA,UAAAA,CAAWK,OAAO,CAACE,YAAY;YACrDJ,SAAUG,CAAAA,aAAAA,CAAAA;AACZ;KACC,EAAA;AAACrB,QAAAA;AAAS,KAAA,CAAA;AAEb,IAAA,qBACEK,GAACd,CAAAA,eAAAA,EAAAA;QACCgC,GAAKR,EAAAA,UAAAA;QACLS,IAAK,EAAA,QAAA;AACLC,QAAAA,aAAAA,EAAa,CAACvB,IAAAA;QACdU,KAAO,EAAA;AACLK,YAAAA,MAAAA,EAAQf,OAAO,CAAC,EAAEe,MAAO,CAAA,EAAE,CAAC,GAAG,CAAA;YAC/BS,UAAYT,EAAAA,MAAAA,KAAW,IAAI,QAAW,GAAA;AACxC,SAAA;AAECjB,QAAAA,QAAAA,EAAAA;;AAGP;;;;"}