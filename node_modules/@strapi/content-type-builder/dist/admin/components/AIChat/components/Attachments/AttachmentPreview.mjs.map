{"version":3,"file":"AttachmentPreview.mjs","sources":["../../../../../../admin/src/components/AIChat/components/Attachments/AttachmentPreview.tsx"],"sourcesContent":["import { Loader } from '@strapi/design-system';\nimport { Folder } from '@strapi/icons';\nimport { styled } from 'styled-components';\n\nimport { STRAPI_CODE_MIME_TYPE } from '../../lib/constants';\nimport { Attachment as TAttachment } from '../../lib/types/attachments';\nimport { Base64Img } from '../Base64Image';\nimport { FullScreenImage } from '../FullScreenImage';\n\nimport { Attachment, AttachmentRootProps } from './components/Attachment';\n\ninterface AttachmentPreviewProps {\n  attachment: TAttachment;\n  loading?: boolean;\n  onRemove?: () => void;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Image\n * -----------------------------------------------------------------------------------------------*/\n\nconst ImageThumbnail = styled(Base64Img)`\n  width: 24px;\n  height: 24px;\n  object-fit: cover;\n  border-radius: ${({ theme }) => theme.borderRadius};\n`;\n\nconst ImageAttachment = ({\n  attachment,\n  onRemove,\n  ...props\n}: AttachmentPreviewProps & Omit<AttachmentRootProps, 'children'>) => {\n  return (\n    <FullScreenImage.Root src={attachment.url} alt={attachment.filename || 'image'}>\n      <FullScreenImage.Trigger asChild>\n        <Attachment.Root {...props}>\n          <Attachment.Preview>\n            {attachment.status === 'loading' ? (\n              <Loader small />\n            ) : (\n              <ImageThumbnail src={attachment.url} alt={attachment.filename} />\n            )}\n          </Attachment.Preview>\n          <Attachment.Title>{attachment.filename || 'unknown'}</Attachment.Title>\n          {onRemove && <Attachment.Remove onClick={onRemove} />}\n        </Attachment.Root>\n      </FullScreenImage.Trigger>\n    </FullScreenImage.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Code\n * -----------------------------------------------------------------------------------------------*/\n\nconst CodeAttachment = ({\n  attachment,\n  onRemove,\n  ...props\n}: AttachmentPreviewProps & Omit<AttachmentRootProps, 'children'>) => {\n  return (\n    <Attachment.Root {...props}>\n      <Attachment.Preview>\n        {attachment.status === 'loading' ? <Loader small /> : <Folder height={24} width={24} />}\n      </Attachment.Preview>\n      <Attachment.Title>{attachment.filename || 'unknown'}</Attachment.Title>\n      {onRemove && <Attachment.Remove onClick={onRemove} />}\n    </Attachment.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Export\n * -----------------------------------------------------------------------------------------------*/\n\nexport const AttachmentPreview = ({\n  attachment,\n  onRemove,\n  ...props\n}: AttachmentPreviewProps & Omit<AttachmentRootProps, 'children'>) => {\n  if (attachment.mediaType?.startsWith('image/')) {\n    return <ImageAttachment attachment={attachment} onRemove={onRemove} {...props} />;\n  }\n\n  if (attachment.mediaType === STRAPI_CODE_MIME_TYPE) {\n    return <CodeAttachment attachment={attachment} onRemove={onRemove} {...props} />;\n  }\n\n  return null;\n};\n"],"names":["ImageThumbnail","styled","Base64Img","theme","borderRadius","ImageAttachment","attachment","onRemove","props","_jsx","FullScreenImage","Root","src","url","alt","filename","Trigger","asChild","_jsxs","Attachment","Preview","status","Loader","small","Title","Remove","onClick","CodeAttachment","Folder","height","width","AttachmentPreview","mediaType","startsWith","STRAPI_CODE_MIME_TYPE"],"mappings":";;;;;;;;;AAiBA;;AAEkG,qGAElG,MAAMA,cAAAA,GAAiBC,MAAOC,CAAAA,SAAAA,CAAU;;;;AAIvB,iBAAA,EAAE,CAAC,EAAEC,KAAK,EAAE,GAAKA,KAAAA,CAAMC,YAAY,CAAC;AACrD,CAAC;AAED,MAAMC,eAAAA,GAAkB,CAAC,EACvBC,UAAU,EACVC,QAAQ,EACR,GAAGC,KAC4D,EAAA,GAAA;IAC/D,qBACEC,GAAA,CAACC,gBAAgBC,IAAI,EAAA;AAACC,QAAAA,GAAAA,EAAKN,WAAWO,GAAG;QAAEC,GAAKR,EAAAA,UAAAA,CAAWS,QAAQ,IAAI,OAAA;gCACrEN,GAAA,CAACC,gBAAgBM,OAAO,EAAA;YAACC,OAAO,EAAA,IAAA;oCAC9BC,IAAA,CAACC,WAAWR,IAAI,EAAA;AAAE,gBAAA,GAAGH,KAAK;;AACxB,kCAAAC,GAAA,CAACU,WAAWC,OAAO,EAAA;kCAChBd,UAAWe,CAAAA,MAAM,KAAK,SAAA,iBACrBZ,GAACa,CAAAA,MAAAA,EAAAA;4BAAOC,KAAK,EAAA;2CAEbd,GAACT,CAAAA,cAAAA,EAAAA;AAAeY,4BAAAA,GAAAA,EAAKN,WAAWO,GAAG;AAAEC,4BAAAA,GAAAA,EAAKR,WAAWS;;;AAGzD,kCAAAN,GAAA,CAACU,WAAWK,KAAK,EAAA;AAAElB,wBAAAA,QAAAA,EAAAA,UAAAA,CAAWS,QAAQ,IAAI;;oBACzCR,QAAY,kBAAAE,GAAA,CAACU,WAAWM,MAAM,EAAA;wBAACC,OAASnB,EAAAA;;;;;;AAKnD,CAAA;AAEA;;qGAIA,MAAMoB,iBAAiB,CAAC,EACtBrB,UAAU,EACVC,QAAQ,EACR,GAAGC,KAC4D,EAAA,GAAA;IAC/D,qBACEU,IAAA,CAACC,WAAWR,IAAI,EAAA;AAAE,QAAA,GAAGH,KAAK;;AACxB,0BAAAC,GAAA,CAACU,WAAWC,OAAO,EAAA;0BAChBd,UAAWe,CAAAA,MAAM,KAAK,SAAA,iBAAYZ,GAACa,CAAAA,MAAAA,EAAAA;oBAAOC,KAAK,EAAA;mCAAMd,GAACmB,CAAAA,MAAAA,EAAAA;oBAAOC,MAAQ,EAAA,EAAA;oBAAIC,KAAO,EAAA;;;AAEnF,0BAAArB,GAAA,CAACU,WAAWK,KAAK,EAAA;AAAElB,gBAAAA,QAAAA,EAAAA,UAAAA,CAAWS,QAAQ,IAAI;;YACzCR,QAAY,kBAAAE,GAAA,CAACU,WAAWM,MAAM,EAAA;gBAACC,OAASnB,EAAAA;;;;AAG/C,CAAA;AAEA;;qGAIawB,MAAAA,iBAAAA,GAAoB,CAAC,EAChCzB,UAAU,EACVC,QAAQ,EACR,GAAGC,KAC4D,EAAA,GAAA;AAC/D,IAAA,IAAIF,UAAW0B,CAAAA,SAAS,EAAEC,UAAAA,CAAW,QAAW,CAAA,EAAA;AAC9C,QAAA,qBAAOxB,GAACJ,CAAAA,eAAAA,EAAAA;YAAgBC,UAAYA,EAAAA,UAAAA;YAAYC,QAAUA,EAAAA,QAAAA;AAAW,YAAA,GAAGC;;AAC1E;IAEA,IAAIF,UAAAA,CAAW0B,SAAS,KAAKE,qBAAuB,EAAA;AAClD,QAAA,qBAAOzB,GAACkB,CAAAA,cAAAA,EAAAA;YAAerB,UAAYA,EAAAA,UAAAA;YAAYC,QAAUA,EAAAA,QAAAA;AAAW,YAAA,GAAGC;;AACzE;IAEA,OAAO,IAAA;AACT;;;;"}