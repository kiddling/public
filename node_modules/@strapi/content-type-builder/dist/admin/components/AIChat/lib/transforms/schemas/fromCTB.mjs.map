{"version":3,"file":"fromCTB.mjs","sources":["../../../../../../../admin/src/components/AIChat/lib/transforms/schemas/fromCTB.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\nimport { Schema } from '../../types/schema';\n\nimport type { ContentType, Component, AnyAttribute } from '../../../../../types';\n\nconst transformAttributesFromCTBToChat = (attributes: AnyAttribute[]) => {\n  return attributes.reduce(\n    (acc, attribute) => {\n      const { name, ...rest } = attribute;\n\n      return {\n        ...acc,\n        [name]: rest,\n      };\n    },\n    {} as Record<string, Omit<AnyAttribute, 'name'>>\n  );\n};\n\nexport const transformCTBToChat = (schema: ContentType | Component): Schema => {\n  if (schema.modelType === 'component') {\n    return {\n      category: schema.category,\n      kind: 'component',\n      action: 'create',\n      modelType: 'component',\n      description: schema.info.description,\n      name: schema.info.displayName,\n\n      uid: schema.uid as any,\n      attributes: transformAttributesFromCTBToChat(schema.attributes),\n      // @ts-expect-error - injected from previous ai messages\n      sources: schema.sources,\n    } as any;\n  }\n\n  return {\n    kind: schema.kind,\n    modelType: schema.modelType,\n    description: schema.info.description,\n    action: 'create',\n    name: schema.info.pluralName,\n    uid: schema.uid as any,\n    attributes: transformAttributesFromCTBToChat(schema.attributes),\n    // @ts-expect-error - injected from previous ai messages\n    sources: schema.sources,\n    options: {\n      draftAndPublish: schema.options?.draftAndPublish,\n      localized: false,\n    },\n  } as any;\n};\n"],"names":["transformAttributesFromCTBToChat","attributes","reduce","acc","attribute","name","rest","transformCTBToChat","schema","modelType","category","kind","action","description","info","displayName","uid","sources","pluralName","options","draftAndPublish","localized"],"mappings":"AAAA;AAKA,MAAMA,mCAAmC,CAACC,UAAAA,GAAAA;AACxC,IAAA,OAAOA,UAAWC,CAAAA,MAAM,CACtB,CAACC,GAAKC,EAAAA,SAAAA,GAAAA;AACJ,QAAA,MAAM,EAAEC,IAAI,EAAE,GAAGC,MAAM,GAAGF,SAAAA;QAE1B,OAAO;AACL,YAAA,GAAGD,GAAG;AACN,YAAA,CAACE,OAAOC;AACV,SAAA;AACF,KAAA,EACA,EAAC,CAAA;AAEL,CAAA;AAEO,MAAMC,qBAAqB,CAACC,MAAAA,GAAAA;IACjC,IAAIA,MAAAA,CAAOC,SAAS,KAAK,WAAa,EAAA;QACpC,OAAO;AACLC,YAAAA,QAAAA,EAAUF,OAAOE,QAAQ;YACzBC,IAAM,EAAA,WAAA;YACNC,MAAQ,EAAA,QAAA;YACRH,SAAW,EAAA,WAAA;YACXI,WAAaL,EAAAA,MAAAA,CAAOM,IAAI,CAACD,WAAW;YACpCR,IAAMG,EAAAA,MAAAA,CAAOM,IAAI,CAACC,WAAW;AAE7BC,YAAAA,GAAAA,EAAKR,OAAOQ,GAAG;YACff,UAAYD,EAAAA,gCAAAA,CAAiCQ,OAAOP,UAAU,CAAA;;AAE9DgB,YAAAA,OAAAA,EAAST,OAAOS;AAClB,SAAA;AACF;IAEA,OAAO;AACLN,QAAAA,IAAAA,EAAMH,OAAOG,IAAI;AACjBF,QAAAA,SAAAA,EAAWD,OAAOC,SAAS;QAC3BI,WAAaL,EAAAA,MAAAA,CAAOM,IAAI,CAACD,WAAW;QACpCD,MAAQ,EAAA,QAAA;QACRP,IAAMG,EAAAA,MAAAA,CAAOM,IAAI,CAACI,UAAU;AAC5BF,QAAAA,GAAAA,EAAKR,OAAOQ,GAAG;QACff,UAAYD,EAAAA,gCAAAA,CAAiCQ,OAAOP,UAAU,CAAA;;AAE9DgB,QAAAA,OAAAA,EAAST,OAAOS,OAAO;QACvBE,OAAS,EAAA;YACPC,eAAiBZ,EAAAA,MAAAA,CAAOW,OAAO,EAAEC,eAAAA;YACjCC,SAAW,EAAA;AACb;AACF,KAAA;AACF;;;;"}