{"version":3,"file":"homepage.js","sources":["../../../../../server/src/controllers/homepage.ts"],"sourcesContent":["import type { Context } from 'koa';\nimport { getService } from '../utils';\nimport { HomepageLayout, HomepageLayoutWrite } from './validation/schema';\n\nexport default {\n  async getKeyStatistics(): Promise<{\n    data: Awaited<ReturnType<typeof homepageService.getKeyStatistics>>;\n  }> {\n    const homepageService = getService('homepage');\n    return { data: await homepageService.getKeyStatistics() };\n  },\n  async getHomepageLayout(ctx: Context): Promise<{ data: HomepageLayout | null }> {\n    const homepageService = getService('homepage');\n    const userId = ctx.state.user?.id;\n\n    const data = await homepageService.getHomepageLayout(userId);\n    return { data };\n  },\n  async updateHomepageLayout(ctx: Context): Promise<{ data: HomepageLayout }> {\n    const homepageService = getService('homepage');\n    const userId = ctx.state.user?.id;\n\n    const body = ctx.request.body as HomepageLayoutWrite;\n    const data = await homepageService.updateHomepageLayout(userId, body);\n    return { data };\n  },\n};\n"],"names":["getKeyStatistics","homepageService","getService","data","getHomepageLayout","ctx","userId","state","user","id","updateHomepageLayout","body","request"],"mappings":";;;;AAIA,eAAe;IACb,MAAMA,gBAAAA,CAAAA,GAAAA;AAGJ,QAAA,MAAMC,kBAAkBC,gBAAW,CAAA,UAAA,CAAA;QACnC,OAAO;YAAEC,IAAM,EAAA,MAAMF,gBAAgBD,gBAAgB;AAAG,SAAA;AAC1D,KAAA;AACA,IAAA,MAAMI,mBAAkBC,GAAY,EAAA;AAClC,QAAA,MAAMJ,kBAAkBC,gBAAW,CAAA,UAAA,CAAA;AACnC,QAAA,MAAMI,MAASD,GAAAA,GAAAA,CAAIE,KAAK,CAACC,IAAI,EAAEC,EAAAA;AAE/B,QAAA,MAAMN,IAAO,GAAA,MAAMF,eAAgBG,CAAAA,iBAAiB,CAACE,MAAAA,CAAAA;QACrD,OAAO;AAAEH,YAAAA;AAAK,SAAA;AAChB,KAAA;AACA,IAAA,MAAMO,sBAAqBL,GAAY,EAAA;AACrC,QAAA,MAAMJ,kBAAkBC,gBAAW,CAAA,UAAA,CAAA;AACnC,QAAA,MAAMI,MAASD,GAAAA,GAAAA,CAAIE,KAAK,CAACC,IAAI,EAAEC,EAAAA;AAE/B,QAAA,MAAME,IAAON,GAAAA,GAAAA,CAAIO,OAAO,CAACD,IAAI;AAC7B,QAAA,MAAMR,IAAO,GAAA,MAAMF,eAAgBS,CAAAA,oBAAoB,CAACJ,MAAQK,EAAAA,IAAAA,CAAAA;QAChE,OAAO;AAAER,YAAAA;AAAK,SAAA;AAChB;AACF,CAAE;;;;"}