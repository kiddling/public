{"version":3,"file":"register.js","sources":["../../../../server/src/register.ts"],"sourcesContent":["import type { Core } from '@strapi/types';\nimport registerAdminPanelRoute from './routes/serve-admin-panel';\nimport adminAuthStrategy from './strategies/admin';\nimport apiTokenAuthStrategy from './strategies/api-token';\n\nexport default ({ strapi }: { strapi: Core.Strapi }) => {\n  const passportMiddleware = strapi.service('admin::passport').init();\n\n  strapi.server.api('admin').use(passportMiddleware);\n  strapi.get('auth').register('admin', adminAuthStrategy);\n  strapi.get('auth').register('content-api', apiTokenAuthStrategy);\n\n  const shouldServeAdminPanel = strapi.config.get('admin.serveAdminPanel');\n\n  if (shouldServeAdminPanel) {\n    registerAdminPanelRoute({ strapi });\n  }\n};\n"],"names":["strapi","passportMiddleware","service","init","server","api","use","get","register","adminAuthStrategy","apiTokenAuthStrategy","shouldServeAdminPanel","config","registerAdminPanelRoute"],"mappings":";;;;;;AAKA,eAAe,CAAA,CAAC,EAAEA,MAAM,EAA2B,GAAA;AACjD,IAAA,MAAMC,kBAAqBD,GAAAA,MAAAA,CAAOE,OAAO,CAAC,mBAAmBC,IAAI,EAAA;AAEjEH,IAAAA,MAAAA,CAAOI,MAAM,CAACC,GAAG,CAAC,OAAA,CAAA,CAASC,GAAG,CAACL,kBAAAA,CAAAA;AAC/BD,IAAAA,MAAAA,CAAOO,GAAG,CAAC,MAAQC,CAAAA,CAAAA,QAAQ,CAAC,OAASC,EAAAA,aAAAA,CAAAA;AACrCT,IAAAA,MAAAA,CAAOO,GAAG,CAAC,MAAQC,CAAAA,CAAAA,QAAQ,CAAC,aAAeE,EAAAA,gBAAAA,CAAAA;AAE3C,IAAA,MAAMC,qBAAwBX,GAAAA,MAAAA,CAAOY,MAAM,CAACL,GAAG,CAAC,uBAAA,CAAA;AAEhD,IAAA,IAAII,qBAAuB,EAAA;QACzBE,eAAwB,CAAA;AAAEb,YAAAA;AAAO,SAAA,CAAA;AACnC;AACF,CAAA;;;;"}